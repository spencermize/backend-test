(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(t,e,r){r(39),t.exports=r(41)},39:function(t,e,r){"use strict";r.r(e);var n=r(13),o=r.n(n),s=r(19),a=r.n(s),i=r(28);function c(t,e,r,n,o,s,a){try{var i=t[s](a),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}var u={data:function(){return{routes:{},store:window.store,name:"Booker"}},methods:{ajaxRequest:function(t,e,r){return(n=o.a.mark(function n(){var s,a,i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(s=new Headers).append("Accept","application/json"),a=Object.assign({method:"GET",headers:s},r),n.prev=3,n.next=6,fetch("".concat(t,"?").concat(e||""),a);case 6:if(!((i=n.sent).status>=200&&i.status<=299)){n.next=13;break}return n.next=10,i.json();case 10:return n.abrupt("return",n.sent);case 13:throw Error(i.statusText);case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(3),console.log(n.t0);case 19:case"end":return n.stop()}},n,null,[[3,16]])}),function(){var t=this,e=arguments;return new Promise(function(r,o){var s=n.apply(t,e);function a(t){c(s,r,o,a,i,"next",t)}function i(t){c(s,r,o,a,i,"throw",t)}a(void 0)})})();var n},optionsToParams:function(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}},created:function(){var t=this,e={Book:"Book",BookList:"BookList"};Object.keys(e).forEach(function(r){t.routes[r]="/api/v1/Spencer-Booker-"+e[r]}),this.routes.ListUpdate="/listupdates",this.routes.GoogleBooks="https://www.googleapis.com/books/v1"}};function l(t,e,r,n,o,s,a){try{var i=t[s](a),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var s=t.apply(e,r);function a(t){l(s,n,o,a,i,"next",t)}function i(t){l(s,n,o,a,i,"throw",t)}a(void 0)})}}var v,f={mixins:[u],data:function(){return{newListTitle:""}},methods:{newList:function(t){var e=this;return d(o.a.mark(function r(){var n;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),n={body:e.optionsToParams({Title:e.newListTitle}),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}},r.t0=e.store.lists.items,r.next=5,e.ajaxRequest("".concat(e.routes.BookList),"",n);case 5:r.t1=r.sent,r.t0.push.call(r.t0,r.t1);case 7:case"end":return r.stop()}},r)}))()},remove:function(t,e){var r=this;return d(o.a.mark(function n(){var s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),s={method:"DELETE"},n.next=4,r.ajaxRequest("".concat(r.routes.BookList,"/").concat(e),"",s);case 4:r.store.lists.items=r.store.lists.items.filter(function(t){return t.ID!=e});case 5:case"end":return n.stop()}},n)}))()}},mounted:(v=d(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.store.state.nav.length=1;case 1:case"end":return t.stop()}},t,this)})),function(){return v.apply(this,arguments)})},p=r(18),b=Object(p.a)(f,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12"},[r("b-form",{staticClass:"row mb-3",on:{submit:t.newList}},[r("b-form-input",{staticClass:"col-6",attrs:{type:"text",placeholder:"Enter a List Name"},model:{value:t.newListTitle,callback:function(e){t.newListTitle=e},expression:"newListTitle"}}),t._v(" "),r("b-button",{staticClass:"ml-3",attrs:{type:"submit",variant:"primary"}},[t._v("Add New List")])],1),t._v(" "),t.store.lists.items?r("b-list-group",{staticClass:"row"},t._l(t.store.lists.items,function(e){return r("b-list-group-item",{key:"item-"+e.ID,staticClass:"col-6 d-flex justify-content-between align-items-center",attrs:{to:"/lists/"+e.ID}},[r("div",[t._v("\n\t\t\t\t"+t._s(e.Title)+"\n\t\t\t\t"),r("b-badge",{staticClass:"ml-1",attrs:{variant:"primary",pill:""}},[t._v(t._s(e.Books.length))])],1),t._v(" "),r("div",[r("b-button",{staticClass:"mx-1",attrs:{variant:"danger","aria-label":"trash"},on:{click:function(r){return t.remove(r,e.ID)}}},[r("b-icon",{attrs:{icon:"trash"}})],1),t._v(" "),r("b-button",{staticClass:"mx-1",attrs:{variant:"success"}},[r("b-icon",{attrs:{icon:"arrow-right-square"}})],1)],1)])}),1):t._e()],1)},[],!1,null,null,null).exports,h=r(31),k=r.n(h);function m(t,e,r,n,o,s,a){try{var i=t[s](a),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}function x(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var s=t.apply(e,r);function a(t){m(s,n,o,a,i,"next",t)}function i(t){m(s,n,o,a,i,"throw",t)}a(void 0)})}}var w={props:{bookID:String|Number,title:String,pubDate:String,author:String,description:String,trashList:Number,addList:Number,classList:String,thumbnail:String,detail:Boolean,ISBN:Number},data:function(){return{added:!1}},mixins:[u],methods:{remove:function(){var t=this;return x(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.modifyServerList(t.bookID,t.trashList,"DELETE");case 2:t.store.state.activeList.Books=t.store.state.activeList.Books.filter(function(e){return t.bookID!=e.id});case 3:case"end":return e.stop()}},e)}))()},add:function(){var t=this;return x(o.a.mark(function e(){var r,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBookByISBN(t.ISBN);case 2:if(0!==(r=e.sent).totalSize){e.next=10;break}return e.next=6,t.createBook();case 6:return e.sent,e.next=9,t.getBookByISBN(t.ISBN);case 9:r=e.sent;case 10:n=r.items[0].ID,t.store.state.activeList.Books.push({id:n}),t.added=!0,t.store.bookList[n]=r.items[0],t.modifyServerList(n,t.addList,"POST");case 15:case"end":return e.stop()}},e)}))()},modifyServerList:function(t,e,r){var n=this;return x(o.a.mark(function s(){var a;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a={method:r,body:n.optionsToParams({list:e,book:t})},o.abrupt("return",n.ajaxRequest(n.routes.ListUpdate,"",a));case 2:case"end":return o.stop()}},s)}))()},createBook:function(){var t=this;return x(o.a.mark(function e(){var r,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={Title:t.title,Description:t.description,Author:t.author,ThumbnailURL:t.thumbnail,PublicationDate:t.pubDate,ISBN:t.ISBN},n={body:t.optionsToParams(r),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},method:"POST"},e.prev=2,e.next=5,t.ajaxRequest(t.routes.Book,"",n);case 5:return e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))()},getBookByISBN:function(t){var e=this;return x(o.a.mark(function r(){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.ajaxRequest(e.routes.Book,"ISBN=".concat(t));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},r)}))()}}},g=Object(p.a)(w,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{class:t.classList+" mb-3",attrs:{"img-src":t.thumbnail,"img-alt":"Book Image",tag:"article","img-left":"",title:t.title,"sub-title":t.author}},[r("b-card-text",[t._v(t._s(t.description)+" ")]),t._v(" "),r("b-button-group",[t.trashList?r("b-button",{staticClass:"mx-1",attrs:{variant:"danger","aria-label":"trash"},on:{click:function(e){return t.remove()}}},[r("b-icon",{attrs:{icon:"trash"}})],1):t._e(),t._v(" "),t.detail?r("b-button",{staticClass:"mx-1",attrs:{to:"/books/"+t.bookID,variant:"primary"}},[r("b-icon",{attrs:{icon:"arrow-right-square"}})],1):t._e(),t._v(" "),t.addList&&!t.added?r("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.add()}}},[r("b-icon",{attrs:{icon:"plus"}})],1):t._e(),t._v(" "),t.addList&&t.added?r("b-button",{attrs:{disabled:t.added}},[r("b-icon",{attrs:{icon:"plus"}})],1):t._e()],1)],1)},[],!1,null,null,null).exports;function A(t,e,r,n,o,s,a){try{var i=t[s](a),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}function B(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var s=t.apply(e,r);function a(t){A(s,n,o,a,i,"next",t)}function i(t){A(s,n,o,a,i,"throw",t)}a(void 0)})}}function L(t,e,r){var n;return function(){var o=this,s=arguments,a=r&&!n;clearTimeout(n),n=setTimeout(function(){n=null,r||t.apply(o,s)},e),a&&t.apply(o,s)}}var y={mixins:[u],components:{draggable:k.a,BookCard:g},data:function(){return{bookshelfImg:"data:image/jpg;base64,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",adding:!1,searching:!1,saving:!1,query:"",search:null,results:null,order:1}},watch:{query:function(){this.search()}},mounted:function(){var t=this;return B(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=window.setInterval(function(){t.store.lists.items&&(t.store.state.activeList=t.store.lists.items.filter(function(e){return e.ID==t.$route.params.id})[0],t.loadBooks(),0===t.store.state.nav.filter(function(e){return e.to.path===t.$route.fullPath}).length&&t.store.state.nav.push({text:t.store.state.activeList.Title,to:{path:t.$route.fullPath}}),clearInterval(r))},250);case 1:case"end":return e.stop()}},e)}))()},created:function(){var t=this;return B(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.search=L(function(){t.googleBooks()},1e3);case 1:case"end":return e.stop()}},e)}))()},destroyed:function(){"/"==this.$route.path&&(this.store.state.nav.pop(),this.store.state.activeList=!1)},methods:{sort:function(t){var e=this;this.store.state.activeList.Books.sort(function(r,n){var o=e.store.bookList[r.id],s=e.store.bookList[n.id];return e.order=-1*e.order,o[t]===s[t]?0:o[t]<s[t]?-1*e.order:o[t]>s[t]?1*e.order:void 0})},getDescription:function(t){return t.volumeInfo.description&&t.volumeInfo.description.length>=250?"".concat(t.volumeInfo.description.substr(0,250),"..."):t.volumeInfo.description},getISBN:function(t){if(t.volumeInfo.industryIdentifiers){var e=t.volumeInfo.industryIdentifiers.filter(function(t){return"ISBN_13"==t.type});return e?e[0]&&Number(e[0].identifier):0}},loadBooks:function(){var t=this;return B(o.a.mark(function e(){var r,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.store.state.activeList.Books.length){e.next=14;break}r=0;case 2:if(!(r<t.store.state.activeList.Books.length)){e.next=12;break}if(n=t.store.state.activeList.Books[r],t.store.bookList[n.id]){e.next=9;break}return e.next=7,t.ajaxRequest("".concat(t.routes.Book,"/").concat(n.id));case 7:t.store.bookList[n.id]=e.sent,t.$forceUpdate();case 9:r++,e.next=2;break;case 12:e.next=15;break;case 14:t.adding=!0;case 15:case"end":return e.stop()}},e)}))()},saveOrder:function(){var t=this;return B(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.saving=!0,r={method:"POST",body:t.optionsToParams({list:t.store.state.activeList.ID,books:t.store.state.activeList.Books.map(function(t){return t.id}).join(",")})},e.next=4,t.ajaxRequest("".concat(t.routes.ListUpdate,"/reorder"),"",r);case 4:t.saving=!1;case 5:case"end":return e.stop()}},e)}))()},googleBooks:function(){var t=this;return B(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.searching=!0,e.next=3,t.ajaxRequest("".concat(t.routes.GoogleBooks,"/volumes"),"q=".concat(t.query,"&key=").concat("AIzaSyBCJLnocgVgLkQGv-xGyQ9avjDN55bWbqU"));case 3:t.results=e.sent,t.searching=!1;case 5:case"end":return e.stop()}},e)}))()}}},I=Object(p.a)(y,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-12"},[t.store.state.activeList?r("div",[r("div",{staticClass:"row my-3"},[r("div",{staticClass:"row col-12"},[!t.adding&&t.store.state.activeList.Books.length>=2?r("b-button-group",[r("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.sort("Author")}}},[t._v("Sort by Author")]),t._v(" "),r("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.sort("Title")}}},[t._v("Sort by Title")]),t._v(" "),r("b-button",{attrs:{variant:"success"},on:{click:t.saveOrder}},[t._v(t._s(t.saving?"Saving...":"Save Current List Order"))])],1):t._e(),t._v(" "),t.adding?t._e():r("b-button-group",{staticClass:"mx-1"},[r("b-button",{attrs:{variant:"success"},on:{click:function(e){t.adding=!t.adding}}},[t._v("Add New Book")])],1)],1),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"col-6 row"},[t.adding?r("b-form-group",{staticClass:"col-12",attrs:{id:"searchGroup",label:"Add a book to your list",description:"Source any book Google Books recognizes"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Enter a book title or author..."},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1):t._e(),t._v(" "),t.adding?r("b-button",{staticClass:"col-12 col-lg-4 mx-3",attrs:{variant:"primary"},on:{click:function(e){t.adding=!1}}},[t._v("Done Adding")]):t._e(),t._v(" "),t.searching?r("b-spinner",{staticClass:"mx-1",attrs:{label:"Spinning"}}):t._e()],1)]),t._v(" "),t.results&&t.adding?r("div",{staticClass:"col-12"},t._l(t.results.items,function(e){return r("book-card",{key:e.id,attrs:{bookID:e.id,pubDate:e.volumeInfo.publishedDate,addList:t.store.state.activeList.ID,title:e.volumeInfo.title,ISBN:t.getISBN(e),author:e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"",thumbnail:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"",description:t.getDescription(e)}})}),1):t._e(),t._v(" "),t.adding?t._e():r("div",{staticClass:"col-12"},[r("draggable",{attrs:{draggable:"article"},model:{value:t.store.state.activeList.Books,callback:function(e){t.$set(t.store.state.activeList,"Books",e)},expression:"store.state.activeList.Books"}},t._l(t.store.state.activeList.Books,function(e){return r("book-card",{key:e.id,attrs:{bookID:e.id,pubDate:t.store.bookList[e.id]?t.store.bookList[e.id].PublicationDate:"",author:t.store.bookList[e.id]?t.store.bookList[e.id].Author:"",trashList:t.store.state.activeList.ID,classList:"draggable",title:t.store.bookList[e.id]?t.store.bookList[e.id].Title:"",thumbnail:t.store.bookList[e.id]?t.store.bookList[e.id].ThumbnailURL:"",description:t.store.bookList[e.id]?t.store.bookList[e.id].Description:"",detail:!0}})}),1)],1)]):r("b-skeleton-wrapper",{attrs:{loading:!0},scopedSlots:t._u([{key:"loading",fn:function(){return t._l(5,function(e){return r("b-card",{key:e,staticClass:"mb-3",attrs:{"img-left":"","img-src":t.bookshelfImg}},[r("b-skeleton",{attrs:{width:"85%"}}),t._v(" "),r("b-skeleton",{attrs:{width:"55%"}}),t._v(" "),r("b-skeleton",{attrs:{width:"70%"}}),t._v(" "),r("b-skeleton",{attrs:{width:"70%"}})],1)})},proxy:!0}])})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row col-12"},[e("em",[this._v("Tip: You can drag / drop the book order as well!")])])}],!1,null,null,null).exports;function j(t,e,r,n,o,s,a){try{var i=t[s](a),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}function S(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var s=t.apply(e,r);function a(t){j(s,n,o,a,i,"next",t)}function i(t){j(s,n,o,a,i,"throw",t)}a(void 0)})}}var P={mixins:[u],data:function(){return{book:null}},mounted:function(){var t=this;return S(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBook();case 2:t.book=e.sent,t.store.state.nav.push({text:t.book.Title,to:{path:t.$route.fullPath}});case 4:case"end":return e.stop()}},e)}))()},methods:{getBook:function(){var t=this;return S(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.ajaxRequest("".concat(t.routes.Book,"/").concat(t.$route.params.id)));case 1:case"end":return e.stop()}},e)}))()}},destroyed:function(){this.store.state.nav.pop()}},C=Object(p.a)(P,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.book?r("article",{staticClass:"row"},[r("h1",{staticClass:"col-12"},[t._v(t._s(t.book.Title))]),t._v(" "),r("h2",{staticClass:"col-12 text-muted"},[t._v(t._s(t.book.Author))]),t._v(" "),r("img",{staticClass:"col-2",attrs:{src:t.book.ThumbnailURL,alt:t.book.Title+" cover"}}),t._v(" "),r("p",{staticClass:"pt-3 col-10"},[t._v("\n\t\t"+t._s(t.book.Description)+" "),r("br"),t._v(" "),r("small",[r("strong",{staticClass:"mr-1"},[t._v("Published:")]),t._v(t._s(t.book.PublicationDate))]),t._v(" "),r("br"),t._v(" "),r("small",[r("strong",{staticClass:"mr-1"},[t._v("ISBN-13:")]),t._v(t._s(t.book.ISBN))])])]):r("b-spinner",{staticStyle:{width:"10rem",height:"10rem"},attrs:{variant:"success",label:"Spinning"}})},[],!1,null,null,null).exports,D=r(32),T=r(27);function E(t,e,r,n,o,s,a){try{var i=t[s](a),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}if(a.a.use(i.a),a.a.use(D.a),a.a.use(T.a),!window.location.href.includes("/Security/login")){window.store={state:{loading:!1,activeList:!1,error:!1,nav:[{text:"Home",to:{path:"/"}}]},lists:[],bookList:{}};var q=[{path:"/",component:b},{path:"/lists/:id",component:I},{path:"/books/:id",component:C}],M=new i.a({routes:q});new a.a({el:"#app",router:M,mixins:[u],data:function(){return{}},mounted:function(){var t,e=this;return(t=o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajaxRequest(e.routes.BookList);case 2:e.store.lists=t.sent;case 3:case"end":return t.stop()}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var s=t.apply(e,r);function a(t){E(s,n,o,a,i,"next",t)}function i(t){E(s,n,o,a,i,"throw",t)}a(void 0)})})()},methods:{}})}},41:function(t,e){}},[[33,1,2]]]);
